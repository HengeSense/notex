{% extends "base.html" %}

{% block app-js %}
<script type="text/javascript" src="{% url editor:ReportManager.util.js %}"></script>
<script type="text/javascript" src="{% url editor:ReportManager.tree.js %}"></script>
<script type="text/javascript" src="{% url editor:ReportManager.task.js %}"></script>
<script type="text/javascript" src="{% url editor:ReportManager.js %}"></script>
<script type="text/javascript" src="{% url editor:Editor.js %}"></script>
<script type="text/javascript" src="{% url editor:Dialog.openFile.js %}"></script>
<script type="text/javascript" src="{% url editor:Dialog.js %}"></script>
<script type="text/javascript" src="{% url editor:Base64.js %}"></script>
<script type="text/javascript" src="{% url editor:Math.uuid.js %}"></script>
{% endblock %}

{% block main %}
<script type="text/javascript">

    var session = {
        id: '{{ sid }}', 
        timestamp: '{{ timestamp }}'
    }

    var urls = {
        createProject : '{% url editor:post.createProject %}', 
        createFolder : '{% url editor:post.createFolder %}', 
        createText : '{% url editor:post.createText %}', 
        createImage : '{% url editor:post.createImage %}', 
        
        read : '{% url editor:post.read %}',
        
        updateText : '{% url editor:post.updateText %}', 
        updateImage : '{% url editor:post.updateImage %}', 
        swapRank : '{% url editor:post.swapRank %}', 
        
        rename : '{% url editor:post.rename %}', 
        del : '{% url editor:post.delete %}',

        fetchText : '{% url editor:data.fetchText "=" %}',
        fetchLatex : '{% url editor:data.fetchLatex "=" %}',
        fetchPdf : '{% url editor:data.fetchPdf "=" %}',

        storeFile : '{% url editor:data.storeFile "*" %}'
    }

    dump (session);    
</script>

<script type="text/javascript">
Ext.onReady (function () {

    Ext.QuickTips.init ()
    var viewport = new Ext.Viewport ({

        layout : 'border', 
        id : 'viewportId',

        items : [{
            region : 'center',
            layout : 'fit',
            items : [editor]
        },{
            region : 'west',
            split : true,
            minWidth : 260,
            width : 260,
            collapsed : false,
            collapseMode : 'mini',
            hidden : false,
            layout : 'fit',
            items : [reportManager]
        }]
    })

    viewport.show ()
});</script>
{% endblock %}
